# 幻读问题
视频中，对于不可重复读与幻读现象的解释，有点问题

以下均针对MySQL数据库的`InnoDB`引擎而言，并不适用于其它数据库
* 首先，不管是脏读、不可重复读、幻读，它们都是一个事务作查询，另一个事务作更改而引发的问题
* 在`读未提交`的隔离级别下，是`事务1`查询到了`事务2`未提交的最新数据，这称为脏读
* 在`读提交`的隔离级别下，`事务1`查询到了`事务2`提交的最新数据，但多次查询结果不一致，分两种情况
    * `事务2`执行 update, delete 操作引发的不可重复读，可以通过`事务1`的行锁加以防范
    * `事务2`执行 insert 操作导致`事务`引发的不一致，称为幻读，`事务1`的行锁防不住
* 在`可重复读`的隔离级别下，`事务2`的更改总是对`事务1`不可见，`事务1`从而保证了多次查询的一致性，但是
    * 例如`事务2`，加入了一条 id=1 的记录，`事务1`的普通查询看不到，如果也想加入 id=1 的记录，就会失败（明明没有，却不能成功，因而称之为幻）
    * `事务1`可以通过临键锁防止幻读
* 在`串行化`的隔离级别下，因为不再是 MVCC 并发方式，普通 select 也变成了 select lock in share mode 因此读写互斥
